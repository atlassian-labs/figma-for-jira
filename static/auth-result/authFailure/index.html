<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title></title>
    <link rel="stylesheet" href="../styled.css" />
  </head>
  <body>
    <container id="authFailure">
      <content>
        <img src="ErrorIcon.svg" alt="Error" />
        <heading>Something went wrong</heading>
        <text
          >We could not grant access to your account. Please try again.</text
        >
      </content>
    </container>
    <script>
      if (window.opener) {
        const params = new URLSearchParams(window.location.search);

        if (params.has('success')) {
          const errorMessage = params.get('errorMessage');

          // Send the authentication result to the opener window
          window.opener.postMessage(
            {
              type: 'auth:failure',
              message: errorMessage || 'Unable to connect the account.',
              errorType,
            },
            '*',
          );
        }
      }
    </script>
  </body>
</html>
