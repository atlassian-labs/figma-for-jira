generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ConnectInstallation {
  id           Int    @id @default(autoincrement())
  key          String
  clientKey    String @unique
  sharedSecret String
  baseUrl      String
  displayUrl   String
}

model FigmaOAuth2UserCredentials {
  id              Int      @id @default(autoincrement())
  atlassianUserId String   @unique
  accessToken     String
  refreshToken    String
  expiresAt       DateTime @db.Timestamptz
}

enum FigmaWebhookStatus {
  PENDING
  ACTIVE
  PAUSED
  ERROR
}

model FigmaWebhook {
  id                        Int                @id @default(autoincrement())
  webhookId                 String             @unique
  teamId                    String             @unique
  teamName                  String
  // Atlassian user ID of the Figma admin that configured this webhook
  figmaAdminAtlassianUserId String
  status                    FigmaWebhookStatus
}
